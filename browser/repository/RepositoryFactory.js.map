{"version":3,"sources":["../browser/src/repository/RepositoryFactory.ts"],"names":[],"mappings":"AAAA,OAAO,EAAC,cAAc,EAAC,MAAM,kBAAkB,CAAC;AAEhD,OAAO,EAAC,UAAU,EAAC,MAAM,cAAc,CAAC;AACxC,OAAO,EAAC,WAAW,EAAC,MAAM,+BAA+B,CAAC;AAC1D,OAAO,EAAC,eAAe,EAAC,MAAM,mBAAmB,CAAC;AAIlD;;GAEG;AACH;IAAA;IAyCA,CAAC;IAvCG,4EAA4E;IAC5E,iBAAiB;IACjB,4EAA4E;IAE5E;;OAEG;IACH,kCAAM,GAAN,UAAO,OAAsB,EAAE,QAAwB,EAAE,WAAyB;QAE9E,IAAI,QAAQ,CAAC,QAAQ,EAAE;YACnB,4HAA4H;YAC5H,kEAAkE;YAClE,IAAM,UAAU,GAAG,IAAI,cAAc,EAAO,CAAC;YAC7C,MAAM,CAAC,MAAM,CAAC,UAAU,EAAE;gBACtB,OAAO,EAAE,OAAO;gBAChB,QAAQ,EAAE,QAAQ;gBAClB,WAAW,EAAE,WAAW;aAC3B,CAAC,CAAC;YACH,OAAO,UAAU,CAAC;SAErB;aAAM;YACH,4HAA4H;YAC5H,kEAAkE;YAClE,IAAI,UAAU,SAAiB,CAAC;YAChC,IAAI,OAAO,CAAC,UAAU,CAAC,MAAM,YAAY,WAAW,EAAE;gBAClD,UAAU,GAAG,IAAI,eAAe,EAAE,CAAC;aACtC;iBAAM;gBACH,UAAU,GAAG,IAAI,UAAU,EAAO,CAAC;aACtC;YACD,MAAM,CAAC,MAAM,CAAC,UAAU,EAAE;gBACtB,OAAO,EAAE,OAAO;gBAChB,QAAQ,EAAE,QAAQ;gBAClB,WAAW,EAAE,WAAW;aAC3B,CAAC,CAAC;YAEH,OAAO,UAAU,CAAC;SACrB;IACL,CAAC;IAEL,wBAAC;AAAD,CAzCA,AAyCC,IAAA","file":"RepositoryFactory.js","sourcesContent":["import {TreeRepository} from \"./TreeRepository\";\r\nimport {EntityMetadata} from \"../metadata/EntityMetadata\";\r\nimport {Repository} from \"./Repository\";\r\nimport {MongoDriver} from \"../driver/mongodb/MongoDriver\";\r\nimport {MongoRepository} from \"./MongoRepository\";\r\nimport {QueryRunner} from \"../query-runner/QueryRunner\";\r\nimport {EntityManager} from \"../entity-manager/EntityManager\";\r\n\r\n/**\r\n * Factory used to create different types of repositories.\r\n */\r\nexport class RepositoryFactory {\r\n\r\n    // -------------------------------------------------------------------------\r\n    // Public Methods\r\n    // -------------------------------------------------------------------------\r\n\r\n    /**\r\n     * Creates a repository.\r\n     */\r\n    create(manager: EntityManager, metadata: EntityMetadata, queryRunner?: QueryRunner): Repository<any> {\r\n\r\n        if (metadata.treeType) {\r\n            // NOTE: dynamic access to protected properties. We need this to prevent unwanted properties in those classes to be exposed,\r\n            // however we need these properties for internal work of the class\r\n            const repository = new TreeRepository<any>();\r\n            Object.assign(repository, {\r\n                manager: manager,\r\n                metadata: metadata,\r\n                queryRunner: queryRunner,\r\n            });\r\n            return repository;\r\n\r\n        } else {\r\n            // NOTE: dynamic access to protected properties. We need this to prevent unwanted properties in those classes to be exposed,\r\n            // however we need these properties for internal work of the class\r\n            let repository: Repository<any>;\r\n            if (manager.connection.driver instanceof MongoDriver) {\r\n                repository = new MongoRepository();\r\n            } else {\r\n                repository = new Repository<any>();\r\n            }\r\n            Object.assign(repository, {\r\n                manager: manager,\r\n                metadata: metadata,\r\n                queryRunner: queryRunner,\r\n            });\r\n\r\n            return repository;\r\n        }\r\n    }\r\n\r\n}"],"sourceRoot":".."}