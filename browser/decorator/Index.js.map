{"version":3,"sources":["../browser/src/decorator/Index.ts"],"names":[],"mappings":"AAAA,OAAO,EAAC,sBAAsB,EAAe,MAAM,KAAK,CAAC;AAoDzD;;;;GAIG;AACH,MAAM,gBAAgB,qBAAyG,EACzG,oBAAyH,EACzH,YAA2B;IAE7C,uBAAuB;IACvB,IAAM,IAAI,GAAG,OAAO,qBAAqB,KAAK,QAAQ,CAAC,CAAC,CAAC,qBAAqB,CAAC,CAAC,CAAC,SAAS,CAAC;IAC3F,IAAM,MAAM,GAAG,OAAO,qBAAqB,KAAK,QAAQ,CAAC,CAAC,CAAkE,oBAAoB,CAAC,CAAC,CAAC,qBAAiC,CAAC;IACrL,IAAI,OAAO,GAAG,CAAC,OAAO,qBAAqB,KAAK,QAAQ,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,qBAAqB,CAAC,CAAC,CAAC,CAAC,CAAC,qBAAqC,CAAC,CAAC,CAAC,YAAY,CAAC;IAC1J,IAAI,CAAC,OAAO;QACR,OAAO,GAAG,CAAC,OAAO,oBAAoB,KAAK,QAAQ,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,oBAAoB,CAAC,CAAC,CAAC,CAAC,CAAC,oBAAoC,CAAC,CAAC,CAAC,YAAY,CAAC;IAEvJ,OAAO,UAAU,WAA4B,EAAE,YAAqB;QAEhE,sBAAsB,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC;YAClC,MAAM,EAAE,YAAY,CAAC,CAAC,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC,CAAC,WAAuB;YACxE,IAAI,EAAE,IAAI;YACV,OAAO,EAAE,YAAY,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,MAAM;YAC/C,WAAW,EAAE,OAAO,IAAK,OAAkC,CAAC,WAAW,KAAK,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI;YAChG,KAAK,EAAE,OAAO,CAAC,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,SAAS;YAC1C,MAAM,EAAE,OAAO,IAAI,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK;YAChD,OAAO,EAAE,OAAO,IAAI,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK;YAClD,QAAQ,EAAE,OAAO,IAAI,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK;YACpD,MAAM,EAAE,OAAO,IAAI,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK;SAC9B,CAAC,CAAC;IAC5B,CAAC,CAAC;AACN,CAAC","file":"Index.js","sourcesContent":["import {getMetadataArgsStorage, IndexOptions} from \"../\";\r\nimport {IndexMetadataArgs} from \"../metadata-args/IndexMetadataArgs\";\r\n\r\n/**\r\n * Creates a database index.\r\n * Can be used on entity property or on entity.\r\n * Can create indices with composite columns when used on entity.\r\n */\r\nexport function Index(options?: IndexOptions): Function;\r\n\r\n/**\r\n * Creates a database index.\r\n * Can be used on entity property or on entity.\r\n * Can create indices with composite columns when used on entity.\r\n */\r\nexport function Index(name: string, options?: IndexOptions): Function;\r\n\r\n/**\r\n * Creates a database index.\r\n * Can be used on entity property or on entity.\r\n * Can create indices with composite columns when used on entity.\r\n */\r\nexport function Index(name: string, options: { synchronize: false }): Function;\r\n\r\n/**\r\n * Creates a database index.\r\n * Can be used on entity property or on entity.\r\n * Can create indices with composite columns when used on entity.\r\n */\r\nexport function Index(name: string, fields: string[], options?: IndexOptions): Function;\r\n\r\n/**\r\n * Creates a database index.\r\n * Can be used on entity property or on entity.\r\n * Can create indices with composite columns when used on entity.\r\n */\r\nexport function Index(fields: string[], options?: IndexOptions): Function;\r\n\r\n/**\r\n * Creates a database index.\r\n * Can be used on entity property or on entity.\r\n * Can create indices with composite columns when used on entity.\r\n */\r\nexport function Index(fields: (object?: any) => (any[]|{ [key: string]: number }), options?: IndexOptions): Function;\r\n\r\n/**\r\n * Creates a database index.\r\n * Can be used on entity property or on entity.\r\n * Can create indices with composite columns when used on entity.\r\n */\r\nexport function Index(name: string, fields: (object?: any) => (any[]|{ [key: string]: number }), options?: IndexOptions): Function;\r\n\r\n/**\r\n * Creates a database index.\r\n * Can be used on entity property or on entity.\r\n * Can create indices with composite columns when used on entity.\r\n */\r\nexport function Index(nameOrFieldsOrOptions?: string|string[]|((object: any) => (any[]|{ [key: string]: number }))|IndexOptions,\r\n                      maybeFieldsOrOptions?: ((object?: any) => (any[]|{ [key: string]: number }))|IndexOptions|string[]|{ synchronize: false },\r\n                      maybeOptions?: IndexOptions): Function {\r\n\r\n    // normalize parameters\r\n    const name = typeof nameOrFieldsOrOptions === \"string\" ? nameOrFieldsOrOptions : undefined;\r\n    const fields = typeof nameOrFieldsOrOptions === \"string\" ? <((object?: any) => (any[]|{ [key: string]: number }))|string[]> maybeFieldsOrOptions : nameOrFieldsOrOptions as string[];\r\n    let options = (typeof nameOrFieldsOrOptions === \"object\" && !Array.isArray(nameOrFieldsOrOptions)) ? nameOrFieldsOrOptions as IndexOptions : maybeOptions;\r\n    if (!options)\r\n        options = (typeof maybeFieldsOrOptions === \"object\" && !Array.isArray(maybeFieldsOrOptions)) ? maybeFieldsOrOptions as IndexOptions : maybeOptions;\r\n\r\n    return function (clsOrObject: Function|Object, propertyName?: string) {\r\n\r\n        getMetadataArgsStorage().indices.push({\r\n            target: propertyName ? clsOrObject.constructor : clsOrObject as Function,\r\n            name: name,\r\n            columns: propertyName ? [propertyName] : fields,\r\n            synchronize: options && (options as { synchronize: false }).synchronize === false ? false : true,\r\n            where: options ? options.where : undefined,\r\n            unique: options && options.unique ? true : false,\r\n            spatial: options && options.spatial ? true : false,\r\n            fulltext: options && options.fulltext ? true : false,\r\n            sparse: options && options.sparse ? true : false\r\n        } as IndexMetadataArgs);\r\n    };\r\n}\r\n"],"sourceRoot":".."}